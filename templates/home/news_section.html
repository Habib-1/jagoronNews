{% load bangla_filters %} {# Keep this load tag if bangla_filters is needed here #}

<section aria-labelledby="elected-news-heading" class="py-2">
    <h2 id="elected-news-heading" class="text-2xl font-bold text-gray-800 flex items-center mb-6">
        <span>Top Read News</span>
        {# SVG icon with Tailwind sizing and fill #}
        <svg viewBox="0 0 32 32" focusable="false" aria-hidden="true" class="w-4 h-4 ml-2 fill-current text-red-600">
            <path d="M21.6 14.3L5.5 31h6.4l14.6-15L11.9 1H5.5l16.1 16.7v-3.4z"></path>
        </svg>
    </h2>

    <div data-testid="curation-grid-normal" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        <ul role="list" data-testid="topic-promos" class="col-span-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            {% for item in most_read_news %}
            <li class="bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden">
                <div class="relative pb-[56.25%] overflow-hidden"> {# 16:9 Aspect Ratio #}
                    <picture>
                        <source srcset="{{ item.heading_image.url }} 85w, {{ item.heading_image.url }} 120w, {{ item.heading_image.url }} 170w, {{ item.heading_image.url }} 232w, {{ item.heading_image.url }} 325w, {{ item.heading_image.url }} 450w, {{ item.heading_image.url }} 660w, {{ item.heading_image.url }} 800w" type="image/webp" sizes="(min-width: 63rem) 232px, (min-width: 37.5rem) 50vw, 33vw" />
                        <source srcset="{{ item.heading_image.url }} 85w, {{ item.heading_image.url }} 120w, {{ item.heading_image.url }} 170w, {{ item.heading_image.url }} 232w, {{ item.heading_image.url }} 325w, {{ item.heading_image.url }} 450w, {{ item.heading_image.url }} 660w, {{ item.heading_image.url }} 800w" type="image/jpeg" sizes="(min-width: 63rem) 232px, (min-width: 37.5rem) 50vw, 33vw" />
                        <img src="{{ item.heading_image.url }}" alt="{{ item.title }}" loading="lazy" class="absolute inset-0 w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/800x450/CCCCCC/333333?text=Image+Not+Found';" />
                    </picture>
                </div>
                <div class="p-4">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">
                        <a href="{% url 'news_details' item.pk %}" class="block hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                            '{{ item.title }}'
                        </a>
                    </h3>
                    <time dateTime="{{ item.created_at }}" class="text-sm text-gray-500">{{ item.created_at|bangla_date }}</time>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
</section>
