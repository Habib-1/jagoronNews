{% extends "base.html" %}
{% load custom_filters %} {# Assuming these are necessary for your Django project #}
{% load bangla_filters %} {# Assuming these are necessary for your Django project #}
{% load static %} {# Assuming these are necessary for your Django project #}

{% block content %} {# This block should match the 'content' block in your base.html #}

<div class="max-w-7xl mx-auto p-4  bg-gray-50">

        <div class="flex flex-col lg:flex-row gap-6">

            <!-- Left Column: Main News (2/3 width on large screens) -->
            <section class="lg:w-2/3 w-full flex flex-col gap-6">
                <h1 class="text-2xl font-bold text-gray-900 mb-2">
                                {{news.title}} 
                        </h1>
                <!-- Main News Card (now occupying full width of the left column) -->
                <div class="bg-white   transition-shadow duration-300 overflow-hidden">
                    
                    <div class="relative pb-[56.25%] overflow-hidden">
                        <img src={{news.heading_image.url}} alt="Main News Headline"
                             loading="lazy" class="absolute inset-0 w-full h-full object-cover"
                             onerror="this.onerror=null;this.src='https://placehold.co/1200x675/CCCCCC/333333?text=Image+Not+Found';" />
                    </div>
                    <div class="p-4 sm:p-6 lg:p-8">
                        <h2 class='text-lg font-bold mb-2' >The Chronify</h2>
                        {% comment %} <h4 class="text-lg my-2.5">{{news.created_at|date:"F j, Y"}}</h4> {% endcomment %}
                        <time datetime="{{ news.created_at }}" class="text-sm text-gray-500">{{ news.created_at | date:"F j, Y" }}</time>
                        <h3 class="text-xl my-3">{{news.sub_content}}</h3>
                        <p class="text-gray-700 text-sm leading-relaxed mb-3 ">
                            {{news.news_content | safe}}
                        </p>
                        
                    </div>
                </div>

            </section>

            <!-- Right Column: Sidebars (1/3 width on large screens) -->
            <div class="lg:w-1/3 w-full flex flex-col gap-6 p-2">

                <!-- Related News Section (formerly National Section) -->
                <div class="bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 p-4 rounded-xl shadow-md">
                    <h2 class="text-xl font-bold mb-4">Related News</h2>
                    <div class="space-y-4">
                        <!-- Related News Item 1 -->
                        {% for related_news_item in related_news_list %}
                        <a href="{% url 'news_details' related_news_item.pk %}" class="flex items-center gap-3 bg-gray-100 dark:bg-gray-700 p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition duration-200">
                            <div class="w-12 h-12 flex items-center justify-center bg-white rounded overflow-hidden flex-shrink-0">
                              <img src="{{ related_news_item.heading_image.url }}" alt="{{ related_news_item.title }}" class="w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/48x48/CCCCCC/333333?text=IMG';" />
                            </div>
                             <span class="text-sm font-medium">ðŸ“° {{ related_news_item.title }}</span>
                        </a>
                        {% endfor %}
                        
                    </div>
                </div>

                <!-- Categories Section -->
                <div class="bg-white p-5 rounded-xl shadow-md border border-gray-100">
                    <h2 class="text-xl font-semibold mb-5 text-gray-800">ðŸ“š Categories</h2>
                    <ul class="space-y-3">
                        {% for cat in navbar %}
                       <a href="{% url 'news_by_cat' cat.pk %}">
                            <li class="flex justify-between items-center px-3 py-2 bg-gray-50 hover:bg-blue-50 transition rounded-md cursor-pointer">
                                <span class="text-gray-700 font-medium">{{ cat.title }}</span>
                                <span class="bg-blue-100 text-blue-700 text-xs font-semibold px-2 py-0.5 rounded-full"> {{cat.news_count}} </span>
                            </li>
                        </a>
                        {% endfor%}
                    </ul>
                </div>


            </div>
        </div>
    </div>

    <!-- Section for "You may like" - Added at the end -->
    <section aria-labelledby="you-may-like-heading" class="max-w-7xl mx-auto p-4 bg-gray-50 mt-6 ">
        <h2 id="you-may-like-heading" class="text-2xl font-bold text-gray-800 flex items-center mb-6">
        <span>You may like</span>
            <svg viewBox="0 0 32 32" focusable="false" aria-hidden="true" class="w-4 h-4 ml-2 fill-current text-red-600">
                <path d="M21.6 14.3L5.5 31h6.4l14.6-15L11.9 1H5.5l16.1 16.7v-3.4z"></path>
            </svg>
        </h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
           
         {% for news in updated_news %}
            <div class="bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden">
                <div class="relative pb-[56.25%] overflow-hidden">
                    <img src="{{news.heading_image.url}}" alt="You May Like 4"
                         loading="lazy" class="absolute inset-0 w-full h-full object-cover"
                         onerror="this.onerror=null;this.src='https://placehold.co/400x225/CCCCCC/333333?text=Image+Not+Found';" />
                </div>
                <div class="p-4">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">
                        <a href="{% url 'news_details' news.pk %}"  class="block hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                           {{news.title}}
                        </a>
                    </h3>
                    <h4 class="text-sm my-2.5">{{news.created_at|date:"F j, Y"}}</h4>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    {% include 'home/elected_news.html' %}
    {% include 'home/news_section.html' %}
    
   

{% endblock content %}